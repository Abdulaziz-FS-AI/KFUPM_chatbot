<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KFUPM AI Assistant</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3>ğŸ’¬ Sessions</h3>
                <button id="newSessionBtn" class="new-session-btn" title="New session">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                </button>
            </div>
            <div class="sessions-list" id="sessionsList">
                <!-- Sessions will be dynamically added here -->
            </div>
        </aside>

        <!-- Main Content -->
        <div class="main-content">
            <div class="container">
                <!-- Header -->
                <header class="header">
                    <div class="header-left">
                        <button id="sidebarToggle" class="sidebar-toggle" title="Toggle sidebar">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="3" y1="12" x2="21" y2="12"></line>
                                <line x1="3" y1="6" x2="21" y2="6"></line>
                                <line x1="3" y1="18" x2="21" y2="18"></line>
                            </svg>
                        </button>
                        <div class="header-content">
                            <h1>ğŸ“ KFUPM AI Assistant</h1>
                            <p class="subtitle">Powered by ALLaM-7B</p>
                        </div>
                    </div>
                    <div class="controls">
                        <a href="/admin" class="admin-link" title="Admin Dashboard">
                            <span>ğŸ“Š</span>
                        </a>
                        <button id="clearBtn" class="clear-btn" title="Clear conversation">
                            <span>ğŸ—‘ï¸</span>
                        </button>
                    </div>
                </header>

                <!-- Chat Container -->
                <div class="chat-container" id="chatContainer">
                    <div class="welcome-message">
                        <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹! Welcome to KFUPM ğŸ‘‹</h2>
                        <p>I'm your AI assistant for King Fahd University of Petroleum & Minerals.</p>
                        <p>Ask me about:</p>
                        <ul>
                            <li>ğŸ“š Academic programs and courses</li>
                            <li>ğŸ“ Admission requirements</li>
                            <li>ğŸ›ï¸ Campus facilities and services</li>
                            <li>ğŸ”¬ Research opportunities</li>
                            <li>â„¹ï¸ General KFUPM information</li>
                        </ul>
                        <p class="tip">ğŸ’¡ <strong>Tip:</strong> Toggle "Web Search" ON for real-time KFUPM website information!</p>
                    </div>
                </div>

                <!-- Input Area -->
                <div class="input-area">
                    <div class="input-wrapper">
                        <button id="searchToggle" class="search-toggle-btn" title="Toggle web search">
                            <span class="search-icon">ğŸŒ</span>
                            <span class="search-text">Web Search</span>
                            <span class="toggle-status">OFF</span>
                        </button>
                        <textarea
                            id="messageInput"
                            placeholder="Ask me anything about KFUPM..." 
                            rows="1"
                            maxlength="2000"
                        ></textarea>
                        <button id="sendBtn" class="send-btn" title="Send message">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="input-footer">
                        <span id="charCount">0 / 2000</span>
                        <span class="status" id="status"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Template -->
    <template id="loadingTemplate">
        <div class="message assistant-message loading-message">
            <div class="message-avatar">ğŸ¤–</div>
            <div class="message-content">
                <div class="typing-indicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </template>

    <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
</body>
</html>